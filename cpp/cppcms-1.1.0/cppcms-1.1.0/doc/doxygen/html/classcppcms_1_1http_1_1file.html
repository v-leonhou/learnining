<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>CppCMS: cppcms::http::file Class Reference</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">CppCMS
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li class="current"><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="annotated.html"><span>Class&#160;List</span></a></li>
      <li><a href="hierarchy.html"><span>Class&#160;Hierarchy</span></a></li>
      <li><a href="functions.html"><span>Class&#160;Members</span></a></li>
    </ul>
  </div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="namespacecppcms.html">cppcms</a></li><li class="navelem"><a class="el" href="namespacecppcms_1_1http.html">http</a></li><li class="navelem"><a class="el" href="classcppcms_1_1http_1_1file.html">file</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="summary">
<a href="#pub-methods">Public Member Functions</a> &#124;
<a href="#friends">Friends</a> &#124;
<a href="classcppcms_1_1http_1_1file-members.html">List of all members</a>  </div>
  <div class="headertitle">
<div class="title">cppcms::http::file Class Reference</div>  </div>
</div><!--header-->
<div class="contents">

<p>This class holds a uploaded file, it is generally fetched via <a class="el" href="classcppcms_1_1widgets_1_1file.html" title="This class represents a file upload form entry. ">widgets::file</a> or via <a href="http::request::files">http::request::files</a>.  
 <a href="classcppcms_1_1http_1_1file.html#details">More...</a></p>

<p><code>#include &lt;<a class="el" href="http__file_8h_source.html">cppcms/http_file.h</a>&gt;</code></p>
<div class="dynheader">
Inheritance diagram for cppcms::http::file:</div>
<div class="dyncontent">
 <div class="center">
  <img src="classcppcms_1_1http_1_1file.png" usemap="#cppcms::http::file_map" alt=""/>
  <map id="cppcms::http::file_map" name="cppcms::http::file_map">
<area href="classbooster_1_1noncopyable.html" title="This class makes impossible to copy any class derived from this one. " alt="booster::noncopyable" shape="rect" coords="0,0,133,24"/>
</map>
 </div></div>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="pub-methods"></a>
Public Member Functions</h2></td></tr>
<tr class="memitem:ab2691618c7312d598a080d60410bad00"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#ab2691618c7312d598a080d60410bad00">name</a> () const </td></tr>
<tr class="separator:ab2691618c7312d598a080d60410bad00"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ab8d8de07a1bf0ce904737dfe53a017bd"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#ab8d8de07a1bf0ce904737dfe53a017bd">mime</a> () const </td></tr>
<tr class="separator:ab8d8de07a1bf0ce904737dfe53a017bd"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a6f94cc6fc4068828a74fe8110cc295b1"><td class="memItemLeft" align="right" valign="top">bool&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a6f94cc6fc4068828a74fe8110cc295b1">has_mime</a> () const </td></tr>
<tr class="separator:a6f94cc6fc4068828a74fe8110cc295b1"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aec7aaa5ab4f57aada988507d5d299f6f"><td class="memItemLeft" align="right" valign="top">std::string&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#aec7aaa5ab4f57aada988507d5d299f6f">filename</a> () const </td></tr>
<tr class="separator:aec7aaa5ab4f57aada988507d5d299f6f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a3a95bc7fefe80a75bc098baa3ad8c400"><td class="memItemLeft" align="right" valign="top">std::istream &amp;&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a3a95bc7fefe80a75bc098baa3ad8c400">data</a> ()</td></tr>
<tr class="separator:a3a95bc7fefe80a75bc098baa3ad8c400"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:aee3dac0ba0afc1128c0a20b72c998238"><td class="memItemLeft" align="right" valign="top">long long&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#aee3dac0ba0afc1128c0a20b72c998238">size</a> ()</td></tr>
<tr class="separator:aee3dac0ba0afc1128c0a20b72c998238"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a9fcb51feca28d1ad113552f63ab82896"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a9fcb51feca28d1ad113552f63ab82896">output_file</a> (std::string const &amp;<a class="el" href="classcppcms_1_1http_1_1file.html#ab2691618c7312d598a080d60410bad00">name</a>, bool is_temporary=false)</td></tr>
<tr class="separator:a9fcb51feca28d1ad113552f63ab82896"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a10a75d543175cd0a69bbbc44049efc26"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a10a75d543175cd0a69bbbc44049efc26">make_permanent</a> ()</td></tr>
<tr class="separator:a10a75d543175cd0a69bbbc44049efc26"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a81bff76b6569f661b18f07dae57025c7"><td class="memItemLeft" align="right" valign="top">int&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a81bff76b6569f661b18f07dae57025c7">close</a> ()</td></tr>
<tr class="separator:a81bff76b6569f661b18f07dae57025c7"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a981a2325266c685788f8e241f2154308"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a981a2325266c685788f8e241f2154308">save_to</a> (std::string const &amp;<a class="el" href="classcppcms_1_1http_1_1file.html#aec7aaa5ab4f57aada988507d5d299f6f">filename</a>)</td></tr>
<tr class="separator:a981a2325266c685788f8e241f2154308"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a11196e4f597b326da3623d78316e4bb9"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a11196e4f597b326da3623d78316e4bb9">set_memory_limit</a> (size_t <a class="el" href="classcppcms_1_1http_1_1file.html#aee3dac0ba0afc1128c0a20b72c998238">size</a>)</td></tr>
<tr class="separator:a11196e4f597b326da3623d78316e4bb9"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:a0e3eb2d67f37ef413915d43f166ec6fe"><td class="memItemLeft" align="right" valign="top">void&#160;</td><td class="memItemRight" valign="bottom"><a class="el" href="classcppcms_1_1http_1_1file.html#a0e3eb2d67f37ef413915d43f166ec6fe">set_temporary_directory</a> (std::string const &amp;dir)</td></tr>
<tr class="separator:a0e3eb2d67f37ef413915d43f166ec6fe"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a name="friends"></a>
Friends</h2></td></tr>
<tr class="memitem:a85b2d00ed5d8672f7dbb26f19a0b6123"><td class="memItemLeft" align="right" valign="top"><a class="anchor" id="a85b2d00ed5d8672f7dbb26f19a0b6123"></a>
class&#160;</td><td class="memItemRight" valign="bottom"><b>request</b></td></tr>
<tr class="separator:a85b2d00ed5d8672f7dbb26f19a0b6123"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<div class="textblock"><p>This class holds a uploaded file, it is generally fetched via <a class="el" href="classcppcms_1_1widgets_1_1file.html" title="This class represents a file upload form entry. ">widgets::file</a> or via <a href="http::request::files">http::request::files</a>. </p>
<p>It provides full information about uploaded data as it was send by browser and allows to read the file via std::istream seek-able interface or save to the file system</p>
<p>Note: this class does not perform any validations, for checking the data use <a class="el" href="classcppcms_1_1widgets_1_1file.html" title="This class represents a file upload form entry. ">widgets::file</a> that allows to perform numerous checks on the file data. </p>
</div><h2 class="groupheader">Member Function Documentation</h2>
<a class="anchor" id="a81bff76b6569f661b18f07dae57025c7"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">int cppcms::http::file::close </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Close the file if it is still open, if the file temporary it is deleted, the the file in memory its content is removed, <a class="el" href="classcppcms_1_1http_1_1file.html#a3a95bc7fefe80a75bc098baa3ad8c400">data()</a> would return non-usable stream</p>
<p>Returns 0 in case of sucess and -1 in case of failure</p>
<p><a class="el" href="v1_2.html">New in CppCMS 1.2</a> 
</div>
</div>
<a class="anchor" id="a3a95bc7fefe80a75bc098baa3ad8c400"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::istream&amp; cppcms::http::file::data </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get std::istream on the data, please note, you need to call <a class="el" href="classcppcms_1_1http_1_1file.html#a3a95bc7fefe80a75bc098baa3ad8c400">data()</a>.seekg(0) when using this stream first time. </p>

</div>
</div>
<a class="anchor" id="aec7aaa5ab4f57aada988507d5d299f6f"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string cppcms::http::file::filename </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the filename as it was sent by the browser. </p>

</div>
</div>
<a class="anchor" id="a6f94cc6fc4068828a74fe8110cc295b1"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">bool cppcms::http::file::has_mime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Returns true if content type defined</p>
<p><a class="el" href="v1_2.html">New in CppCMS 1.2</a> 
</div>
</div>
<a class="anchor" id="a10a75d543175cd0a69bbbc44049efc26"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cppcms::http::file::make_permanent </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Make sure that file created by output_file member function is not removed in destructor</p>
<p><a class="el" href="v1_2.html">New in CppCMS 1.2</a> 
</div>
</div>
<a class="anchor" id="ab8d8de07a1bf0ce904737dfe53a017bd"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string cppcms::http::file::mime </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the content-type of the file as it was sent by the browser. </p>

</div>
</div>
<a class="anchor" id="ab2691618c7312d598a080d60410bad00"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">std::string cppcms::http::file::name </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td> const</td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the name of the POST field (i.e. &lt;input name="value" ...&gt;) </p>

</div>
</div>
<a class="anchor" id="a9fcb51feca28d1ad113552f63ab82896"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cppcms::http::file::output_file </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>name</em>, </td>
        </tr>
        <tr>
          <td class="paramkey"></td>
          <td></td>
          <td class="paramtype">bool&#160;</td>
          <td class="paramname"><em>is_temporary</em> = <code>false</code>&#160;</td>
        </tr>
        <tr>
          <td></td>
          <td>)</td>
          <td></td><td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Specify the path to the output file, note if is_temporary is true than the file would be deleted on <a class="el" href="classcppcms_1_1http_1_1file.html" title="This class holds a uploaded file, it is generally fetched via widgets::file or via http::request::fil...">cppcms::http::file</a> destruction, unless save_to is called, otherwise it would remain persistent</p>
<p><a class="el" href="v1_2.html">New in CppCMS 1.2</a> 
</div>
</div>
<a class="anchor" id="a981a2325266c685788f8e241f2154308"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cppcms::http::file::save_to </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>filename</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Save file to file named <em>filename</em>. Throws <a class="el" href="classcppcms_1_1cppcms__error.html" title="Exception thrown by CppCMS framework. ">cppcms_error</a> in case of failure.</p>
<p>Notes:</p>
<ul>
<li>this function maybe more efficient then just reading the stream and writing it to newly created file, as in case of big files, it would try to move it over the file system</li>
<li>Under Win32 <em>filename</em> should be UTF-8 string </li>
</ul>

</div>
</div>
<a class="anchor" id="a11196e4f597b326da3623d78316e4bb9"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cppcms::http::file::set_memory_limit </td>
          <td>(</td>
          <td class="paramtype">size_t&#160;</td>
          <td class="paramname"><em>size</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the maximal size of file that would be stored in memory instead of file system</p>
<p><a class="el" href="v1_2.html">New in CppCMS 1.2</a> 
</div>
</div>
<a class="anchor" id="a0e3eb2d67f37ef413915d43f166ec6fe"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">void cppcms::http::file::set_temporary_directory </td>
          <td>(</td>
          <td class="paramtype">std::string const &amp;&#160;</td>
          <td class="paramname"><em>dir</em></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Set the temporary directory where uploaded files are created</p>
<p><a class="el" href="v1_2.html">New in CppCMS 1.2</a> 
</div>
</div>
<a class="anchor" id="aee3dac0ba0afc1128c0a20b72c998238"></a>
<div class="memitem">
<div class="memproto">
      <table class="memname">
        <tr>
          <td class="memname">long long cppcms::http::file::size </td>
          <td>(</td>
          <td class="paramname"></td><td>)</td>
          <td></td>
        </tr>
      </table>
</div><div class="memdoc">
<p>Get the size of the file. </p>

</div>
</div>
<hr/>The documentation for this class was generated from the following file:<ul>
<li>cppcms/<a class="el" href="http__file_8h_source.html">http_file.h</a></li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jul 11 2017 23:25:57 for CppCMS by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
